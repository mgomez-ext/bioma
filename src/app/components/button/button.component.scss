// Button Component - Bioma 2.0 Design System
// Implementación según Figma: https://www.figma.com/design/nrxlxahxDQBOiAVQZVWijh (node-id=25685-1132)
// Usa tokens semánticos para consistencia y theming

.bio-button {
  // Reset de estilos de button
  border: none;
  outline: none;
  cursor: pointer;
  user-select: none;
  text-decoration: none;
  font-family: var(--font-primary);

  // Layout
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);

  // Transiciones suaves
  transition:
    background-color var(--transition-fast),
    border-color var(--transition-fast),
    box-shadow var(--transition-fast),
    color var(--transition-fast),
    opacity var(--transition-fast);

  // ========================================
  // VARIANTE: FILLED (default)
  // Fondo primario, texto blanco
  // ========================================
  &--filled {
    background-color: var(--primary-default);
    color: var(--primary-strong);
    border: 1px solid var(--primary-default);

    &:hover:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--primary-hover);
      border-color: var(--primary-hover);
    }

    &:active:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--primary-hover);
      border-color: var(--primary-hover);
    }

    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px var(--border-focus);
    }

    &.bio-button--disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  }

  // ========================================
  // VARIANTE: OUTLINED
  // Fondo blanco, borde secundario
  // ========================================
  &--outlined {
    background-color: var(--bg-default);
    color: var(--primary-default);
    border: 1px solid var(--border-default);

    &:hover:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-hover);
    }

    &:active:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-hover);
      border-color: var(--border-strong);
    }

    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px var(--border-focus);
    }

    &.bio-button--disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  }

  // ========================================
  // VARIANTE: FLAT
  // Fondo sutil, sin borde
  // ========================================
  &--flat {
    background-color: var(--interactive-default);
    color: var(--primary-default);
    border: 1px solid transparent;

    &:hover:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-hover);
    }

    &:active:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-hover);
      border-color: var(--border-default);
    }

    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px var(--border-focus);
    }

    &.bio-button--disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  }

  // ========================================
  // VARIANTE: LINK
  // Estilo de enlace, font-weight regular
  // ========================================
  &--link {
    background-color: transparent;
    color: var(--text-link);
    border: 1px solid transparent;
    font-weight: var(--font-regular);

    &:hover:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-hover);
      text-decoration: underline;
    }

    &:active:not(:disabled):not(.bio-button--disabled) {
      background-color: var(--interactive-active);
    }

    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px var(--border-focus);
    }

    &.bio-button--disabled {
      opacity: 0.6;
      cursor: not-allowed;
      text-decoration: none;
    }
  }

  // ========================================
  // TAMAÑOS (Figma: dimension/space/14, 12, 10)
  // ========================================
  &--large {
    height: var(--spacing-12);
    padding: var(--spacing-3) var(--spacing-6);
    border-radius: var(--radius-md);
    font-size: var(--font-sm);
    font-weight: var(--font-bold);
    line-height: var(--leading-normal);
  }

  &--medium {
    height: var(--spacing-10);
    padding: var(--spacing-3) var(--spacing-5);
    border-radius: var(--radius-md);
    font-size: var(--font-sm);
    font-weight: var(--font-bold);
    line-height: var(--leading-normal);
  }

  &--small {
    height: var(--spacing-9); // dimension/space/10 (36px)
    padding: var(--spacing-3) var(--spacing-4);
    border-radius: var(--radius-md);
    font-size: var(--font-xs);
    font-weight: var(--font-bold);
    line-height: var(--leading-normal);
  }

  // Tamaño large: iconos 16px
  // Tamaño medium/small: iconos 16px (Figma: iconfont x:5)
  &--large .bio-button__icon,
  &--medium .bio-button__icon,
  &--small .bio-button__icon {
    width: 16px;
    height: 16px;
  }

  // Full width
  &--full-width {
    width: 100%;
  }

  // Label
  &__label {
    display: inline-block;
    white-space: nowrap;
  }

  // Icon containers (Figma: left-icon, right-icon)
  &__icon-container {
    display: inline-flex;
    align-items: center;
    justify-content: center;

    &--start {
      margin-right: calc(var(--spacing-2) * -0.5);
    }

    &--end {
      margin-left: calc(var(--spacing-2) * -0.5);
    }
  }

  // Iconos heredan el color del botón (Figma: iconfont fills)
  &__icon {
    color: currentColor;
  }

  // Variante link: iconos usan link color
  &--link &__icon {
    color: currentColor;
  }

  // Estado disabled (global)
  &:disabled,
  &--disabled {
    pointer-events: none;
  }
}

// ========================================
// ESTADOS FORZADOS (para Storybook)
// ========================================
.bio-button--hovered:not(:hover) {
  &.bio-button--filled {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
  }
  &.bio-button--outlined {
    background-color: var(--interactive-hover);
  }
  &.bio-button--flat {
    background-color: var(--interactive-hover);
  }
  &.bio-button--link {
    background-color: var(--interactive-hover);
    text-decoration: underline;
  }
}

.bio-button--active:not(:active) {
  &.bio-button--filled {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
  }
  &.bio-button--outlined {
    background-color: var(--interactive-hover);
    border-color: var(--border-strong);
  }
  &.bio-button--flat {
    background-color: var(--interactive-hover);
    border-color: var(--border-default);
  }
  &.bio-button--link {
    background-color: var(--interactive-active);
  }
}

.bio-button--focused:not(:focus-visible) {
  outline: none;
  box-shadow: 0 0 0 2px var(--border-focus);
}
