import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Bioma 2.1/Foundations/Animation" />

# Sistema de Animaci√≥n

El sistema de animaci√≥n de Bioma 2.0 proporciona transiciones y timing consistentes para crear experiencias fluidas y pulidas.

---

## ‚ö° Transition Tokens

### Timing (Duraci√≥n)

```scss
--transition-fast: 150ms;       // R√°pido
--transition-normal: 250ms;     // Normal (BASE)
--transition-slow: 350ms;       // Lento
```

### Easing Functions (Curvas)

```scss
--ease-in: cubic-bezier(0.4, 0, 1, 1);           // Acelera al final
--ease-out: cubic-bezier(0, 0, 0.2, 1);          // Desacelera al final (BASE)
--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);     // Suave en ambos extremos
```

---

## üéØ Gu√≠a de Uso

### Transition Fast (150ms)

```scss
.quick-transition {
  transition: all var(--transition-fast) var(--ease-out);
}
```

**Uso**: Interacciones inmediatas, cambios sutiles.

**Ejemplos**:
- Hover en botones
- Cambio de color en links
- Tooltips apareciendo

---

### Transition Normal (250ms) - **BASE**

```scss
.normal-transition {
  transition: all var(--transition-normal) var(--ease-out);
}
```

**Uso**: La mayor√≠a de transiciones est√°ndar.

**Ejemplos**:
- Hover en cards
- Cambios de estado
- Expand/collapse sutil

---

### Transition Slow (350ms)

```scss
.slow-transition {
  transition: all var(--transition-slow) var(--ease-in-out);
}
```

**Uso**: Transiciones complejas, animaciones de entrada/salida.

**Ejemplos**:
- Modales abriendo/cerrando
- Sidebars desliz√°ndose
- Animaciones de p√°gina

---

## üé® Easing Functions

### Ease-Out (M√°s com√∫n)

```scss
.ease-out-transition {
  transition: transform var(--transition-normal) var(--ease-out);
}
```

**Efecto**: Comienza r√°pido, termina suave.

**Uso**: La mayor√≠a de interacciones (hover, focus, cambios de estado).

---

### Ease-In

```scss
.ease-in-transition {
  transition: opacity var(--transition-normal) var(--ease-in);
}
```

**Efecto**: Comienza suave, termina r√°pido.

**Uso**: Elementos saliendo de la vista.

---

### Ease-In-Out

```scss
.ease-in-out-transition {
  transition: all var(--transition-slow) var(--ease-in-out);
}
```

**Efecto**: Suave en ambos extremos.

**Uso**: Transiciones complejas, cambios de layout.

---

## üìù Ejemplos de Componentes

### Buttons

```scss
.bio-button {
  transition: background-color var(--transition-fast) var(--ease-out),
              box-shadow var(--transition-fast) var(--ease-out),
              transform var(--transition-fast) var(--ease-out);

  &:hover {
    background-color: var(--primary-hover);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  &:active {
    transform: translateY(0);
    transition-duration: 100ms; // M√°s r√°pido en active
  }
}
```

### Cards

```scss
.bio-card {
  transition: box-shadow var(--transition-normal) var(--ease-out),
              transform var(--transition-normal) var(--ease-out),
              border-color var(--transition-fast) var(--ease-out);

  &:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-4px);
    border-color: var(--border-strong);
  }
}
```

### Inputs

```scss
.bio-input {
  transition: border-color var(--transition-fast) var(--ease-out),
              box-shadow var(--transition-fast) var(--ease-out);

  &:focus {
    border-color: var(--primary-default);
    box-shadow: 0 0 0 3px var(--focus-ring);
  }
}
```

### Modales

```scss
.bio-modal {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity var(--transition-normal) var(--ease-out),
              transform var(--transition-normal) var(--ease-out);

  &.is-open {
    opacity: 1;
    transform: scale(1);
  }
}

.bio-modal__backdrop {
  opacity: 0;
  transition: opacity var(--transition-normal) var(--ease-out);

  &.is-open {
    opacity: 1;
  }
}
```

### Dropdowns

```scss
.bio-dropdown {
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity var(--transition-fast) var(--ease-out),
              transform var(--transition-fast) var(--ease-out);

  &.is-open {
    opacity: 1;
    transform: translateY(0);
  }
}
```

---

## üé¨ Keyframe Animations

### Fade In

```scss
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn var(--transition-normal) var(--ease-out);
}
```

### Slide In

```scss
@keyframes slideInUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in-up {
  animation: slideInUp var(--transition-normal) var(--ease-out);
}
```

### Scale In

```scss
@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.scale-in {
  animation: scaleIn var(--transition-normal) var(--ease-out);
}
```

### Pulse (Loading)

```scss
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.pulse {
  animation: pulse 2s var(--ease-in-out) infinite;
}
```

### Spin (Loading)

```scss
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.spin {
  animation: spin 1s linear infinite;
}
```

---

## üéØ Patrones de Animaci√≥n

### Page Transitions

```scss
.page-enter {
  opacity: 0;
  transform: translateX(20px);
}

.page-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity var(--transition-normal) var(--ease-out),
              transform var(--transition-normal) var(--ease-out);
}

.page-exit {
  opacity: 1;
  transform: translateX(0);
}

.page-exit-active {
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity var(--transition-normal) var(--ease-in),
              transform var(--transition-normal) var(--ease-in);
}
```

### Skeleton Loading

```scss
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--bg-subtle) 0%,
    var(--bg-muted) 50%,
    var(--bg-subtle) 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}
```

### Accordion Expand/Collapse

```scss
.accordion-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height var(--transition-slow) var(--ease-in-out);

  &.is-open {
    max-height: 1000px; // Ajustar seg√∫n contenido
  }
}
```

---

## üé® Animaciones de Entrada

### Stagger (Elementos M√∫ltiples)

```scss
.list-item {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp var(--transition-normal) var(--ease-out) forwards;

  @for $i from 1 through 10 {
    &:nth-child(#{$i}) {
      animation-delay: #{$i * 50ms};
    }
  }
}
```

---

## ‚ôø Accesibilidad

### Respetar Preferencias de Reducci√≥n de Movimiento

```scss
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
```

### Aplicaci√≥n en Componentes

```scss
.animated-card {
  transition: transform var(--transition-normal) var(--ease-out);

  &:hover {
    transform: translateY(-4px);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;

    &:hover {
      transform: none;
    }
  }
}
```

---

## ‚ö° Performance

### Use `transform` y `opacity`

```scss
/* ‚úÖ Performante - GPU accelerated */
.good-animation {
  transition: transform var(--transition-normal),
              opacity var(--transition-normal);

  &:hover {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

/* ‚ùå Menos performante - causa reflow */
.bad-animation {
  transition: width var(--transition-normal),
              height var(--transition-normal),
              top var(--transition-normal);
}
```

### will-change (Usar con cuidado)

```scss
.heavy-animation {
  will-change: transform;
  transition: transform var(--transition-slow);

  &:hover {
    transform: scale(1.2) rotate(5deg);
  }
}
```

---

## üéØ Mejores Pr√°cticas

### ‚úÖ Haz esto:

```scss
// Usa tokens
.button {
  transition: all var(--transition-fast) var(--ease-out);
}

// Especifica propiedades
.card {
  transition: box-shadow var(--transition-normal) var(--ease-out),
              transform var(--transition-normal) var(--ease-out);
}

// Respeta preferencias de usuario
@media (prefers-reduced-motion: reduce) {
  .animated {
    animation: none;
    transition: none;
  }
}
```

### ‚ùå Evita esto:

```scss
// Valores hardcoded
.button {
  transition: all 200ms ease;
}

// Transiciones muy largas
.slow {
  transition: all 2s;  // Demasiado lento para UI
}

// Animar propiedades costosas
.expensive {
  transition: width 300ms, height 300ms;  // Causa reflows
}
```

---

## üìä Resumen

| Token | Duraci√≥n | Uso Principal |
|-------|----------|---------------|
| `transition-fast` | 150ms | Hover, links, cambios sutiles |
| `transition-normal` | 250ms | **Est√°ndar para la mayor√≠a** |
| `transition-slow` | 350ms | Modales, sidebars, layouts |

| Easing | Curva | Uso |
|--------|-------|-----|
| `ease-out` | R√°pido ‚Üí Lento | **M√°s com√∫n (hover, focus)** |
| `ease-in` | Lento ‚Üí R√°pido | Elementos saliendo |
| `ease-in-out` | Suave en ambos | Transiciones complejas |

---

## üìö Recursos

- **Archivo**: `src/styles/tokens.scss`
- **Easing Functions**: [cubic-bezier.com](https://cubic-bezier.com/)
- **Animation Guide**: [web.dev/animations](https://web.dev/animations/)
